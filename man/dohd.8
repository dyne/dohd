.TH DOHD 8 "February 2026" "dohd 0.8" "System Manager's Manual"
.SH NAME
\fBdohd\fR \- minimalist DNS-over-HTTPS daemon
.SH SYNOPSIS
.B dohd
\-c
.I cert
\-k
.I key
[
.B \-p
.I port
] [
.B \-d
.I dnsserver
] [
.B \-u
.I user
] [
.B \-O
] [
.B \-\-odoh-config
.I file
] [
.B \-\-odoh-secret
.I file
] [
.B \-\-authorized-proxies-dir
.I dir
] [
.B \-F
] [
.B \-v
] [
.B \-V
] [
.B \-h
]
.SH DESCRIPTION
.B dohd
listens for incoming DoH requests over TLS and forwards DNS payloads to one or more classic DNS resolvers over UDP.
.PP
With
.B \-O
enabled, it acts as an ODoH target resolver and accepts
.B application/oblivious-dns-message
from authorized proxies.
.SH OPTIONS
.TP
.BI \-c " cert"
TLS certificate chain file (PEM). Mandatory.
.TP
.BI \-k " key"
TLS private key file (PEM). Mandatory.
.TP
.BI \-p " port"
Listen port for DoH service. Default: 8053.
.TP
.BI \-d " dnsserver"
Upstream DNS resolver IP address. Can be repeated to add multiple resolvers.
.TP
.BI \-u " user"
Drop privileges to this user after binding sockets (when started as root).
.TP
.B \-O
Enable ODoH target mode (ODoH media type only).
.TP
.BI \-\-odoh-config " file"
Binary ObliviousDoHConfigs file for target public key configuration.
.TP
.BI \-\-odoh-secret " file"
Private key file for ODoH target (32-byte raw X25519 key).
.IP
Use
.BR odoh-keygen (1)
to create matching
.B \-\-odoh-secret
and
.B \-\-odoh-config
files.
.TP
.BI \-\-authorized-proxies-dir " dir"
Directory containing authorized proxy public keys (PEM), one key per file.
.TP
.B \-F
Run in foreground (do not daemonize).
.TP
.B \-v
Verbose logging.
.TP
.B \-V
Print version and exit.
.TP
.B \-h
Print help and exit.
.SH EXAMPLES
Run in foreground on port 8053 and forward to 8.8.8.8:
.PP
.nf
 dohd -c /etc/test.crt -k /etc/test.key -p 8053 -d 8.8.8.8 -F
.fi
.SH FILES
.TP
.I /etc/test.crt
Example TLS certificate.
.TP
.I /etc/test.key
Example TLS private key.
.SH SECURITY CONSIDERATIONS
For ODoH privacy properties, do not operate target and proxy on the same host,
network boundary, or organization. RFC 9230 relies on trust separation between
proxy and target operators.
.PP
A single operator that can observe both sides can correlate proxy-side client
metadata with target-side decrypted DNS messages.
.PP
Co-located proxy+target setups are suitable only for protocol evaluation and
interoperability tests.
.SH SEE ALSO
.BR dohproxyd (8),
.BR ns2dohd (8),
.BR odoh-keygen (1)
.SH LICENSE
GNU AGPLv3.
